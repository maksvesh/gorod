<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Миссия: Защита Банка</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0d2b4d, #1a4a6b);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        
        .container {
            max-width: 1000px;
            width: 100%;
            background: rgba(0, 20, 40, 0.85);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 150, 255, 0.3);
            position: relative;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #4db8ff;
            text-shadow: 0 0 10px rgba(77, 184, 255, 0.5);
            font-size: 2.5rem;
        }
        
        h2 {
            color: #4db8ff;
            margin: 20px 0 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 10px;
        }
        
        h3 {
            color: #4db8ff;
            margin: 15px 0 10px;
        }
        
        .scene {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .active {
            display: block;
        }
        
        .attempts {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 50, 50, 0.3);
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        .mission-brief {
            background: rgba(0, 30, 60, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #4db8ff;
            line-height: 1.6;
        }
        
        .choices {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .choice {
            background: rgba(30, 60, 90, 0.7);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .choice:hover {
            background: rgba(40, 80, 120, 0.8);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .choice-number {
            display: inline-block;
            background: #4db8ff;
            color: #000;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .input-group {
            margin: 20px 0;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #4db8ff;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #4db8ff;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 16px;
        }
        
        button {
            background: linear-gradient(to right, #4db8ff, #0066cc);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        button:hover {
            background: linear-gradient(to right, #0066cc, #004499);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 102, 204, 0.4);
        }
        
        .result {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2rem;
        }
        
        .success {
            background: rgba(0, 150, 0, 0.3);
            border: 1px solid #00cc00;
            color: #00ff00;
        }
        
        .failure {
            background: rgba(150, 0, 0, 0.3);
            border: 1px solid #ff3333;
            color: #ff6666;
        }
        
        .inventory {
            background: rgba(0, 30, 60, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .inventory-item {
            display: inline-block;
            background: rgba(77, 184, 255, 0.2);
            padding: 8px 15px;
            margin: 5px;
            border-radius: 20px;
            border: 1px solid rgba(77, 184, 255, 0.5);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .timer {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 100, 200, 0.3);
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #4db8ff, #00cc99);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .scene-image {
            width: 100%;
            height: 200px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin: 15px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #aaa;
            font-style: italic;
            background-size: cover;
            background-position: center;
        }
        
        .security-level {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }
        
        .security-bar {
            height: 20px;
            background: rgba(255, 0, 0, 0.2);
            border-radius: 10px;
            flex-grow: 1;
            margin: 0 10px;
            overflow: hidden;
        }
        
        .security-fill {
            height: 100%;
            background: linear-gradient(to right, #ff3333, #00cc00);
            width: 100%;
            transition: width 0.5s ease;
        }
        
        .character-info {
            background: rgba(0, 40, 80, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid #4db8ff;
        }
        
        .mini-game {
            background: rgba(0, 30, 60, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid #4db8ff;
        }
        
        .code-input {
            font-family: monospace;
            font-size: 18px;
            letter-spacing: 2px;
        }
        
        .hacking-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .hacking-cell {
            background: rgba(0, 50, 100, 0.7);
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .hacking-cell:hover {
            background: rgba(0, 100, 200, 0.7);
        }
        
        .hacking-cell.active {
            background: #4db8ff;
            color: #000;
        }
        
        .dialogue {
            background: rgba(0, 20, 40, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #4db8ff;
        }
        
        .branching-choices {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .branching-choice {
            background: rgba(30, 60, 90, 0.7);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }
        
        .branching-choice:hover {
            background: rgba(40, 80, 120, 0.8);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .consequence {
            background: rgba(150, 100, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 3px solid #ffaa00;
        }
        
        .skill-check {
            background: rgba(100, 0, 100, 0.3);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 3px solid #cc00cc;
        }
        
        .notification {
            background: rgba(0, 100, 200, 0.7);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #4db8ff;
            animation: slideIn 0.5s ease-out;
        }
        
        .notification.success {
            background: rgba(0, 150, 0, 0.7);
            border-left: 4px solid #00cc00;
        }
        
        .notification.error {
            background: rgba(150, 0, 0, 0.7);
            border-left: 4px solid #ff3333;
        }
        
        .notification.warning {
            background: rgba(150, 100, 0, 0.7);
            border-left: 4px solid #ffaa00;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .random-event {
            background: rgba(150, 50, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #ff6600;
            animation: pulse 2s infinite;
        }
        
        .event-choices {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .event-choice {
            background: rgba(200, 100, 0, 0.7);
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .event-choice:hover {
            background: rgba(220, 120, 0, 0.8);
            transform: translateY(-2px);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 102, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 102, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 102, 0, 0); }
        }
        
        .consequences-list {
            background: rgba(100, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 3px solid #ff3333;
        }
        
        .consequence-item {
            margin: 5px 0;
            padding-left: 15px;
            position: relative;
        }
        
        .consequence-item:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #ff6666;
        }
        
        .upload-status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        .upload-status.success {
            background: rgba(0, 150, 0, 0.3);
            border: 1px solid #00cc00;
            color: #00ff00;
        }
        
        .upload-status.error {
            background: rgba(150, 0, 0, 0.3);
            border: 1px solid #ff3333;
            color: #ff6666;
        }
        
        .upload-status.uploading {
            background: rgba(0, 100, 200, 0.3);
            border: 1px solid #4db8ff;
            color: #4db8ff;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .attempts, .timer {
                position: static;
                display: inline-block;
                margin: 10px;
            }
            
            .branching-choices {
                grid-template-columns: 1fr;
            }
            
            .event-choices {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="attempts">Попытки: <span id="attempts-count">3</span>/3</div>
        <div class="timer">Время: <span id="timer">00:00</span></div>
        
        <h1>Миссия: Защита Банка</h1>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <!-- Область для уведомлений -->
        <div id="notification-area"></div>
        
        <!-- Сцена 0: Ввод данных -->
        <div class="scene active" id="scene-0">
            <h2>Идентификация сотрудника безопасности</h2>
            <div class="mission-brief">
                <p>Добро пожаловать в систему безопасности банка "Федерал Резерв".</p>
                <p>Для доступа к панели управления введите ваши данные.</p>
            </div>
            
            <div class="character-info">
                <h3>Введите ваши данные</h3>
                <div class="input-group">
                    <label for="player-name">Имя:</label>
                    <input type="text" id="player-name" placeholder="Введите ваше имя">
                </div>
                
                <div class="input-group">
                    <label for="player-surname">Фамилия:</label>
                    <input type="text" id="player-surname" placeholder="Введите вашу фамилию">
                </div>
                
                <div class="input-group">
                    <label for="player-id">ID сотрудника:</label>
                    <input type="text" id="player-id" placeholder="Введите ваш ID">
                </div>
            </div>
            
            <button id="start-mission">Активировать систему безопасности</button>
        </div>
        
        <!-- Остальные сцены остаются без изменений -->
        <!-- Сцена 1: Обзор системы безопасности -->
        <div class="scene" id="scene-1">
            <h2>Этап 1: Обзор системы безопасности</h2>
            <div class="scene-image" style="background-color: #0d2b4d; display: flex; align-items: center; justify-content: center;">
                <div>Центр управления безопасностью</div>
            </div>
            
            <div class="mission-brief">
                <p>Вы в центре управления безопасностью банка. Система сообщает о подозрительной активности.</p>
                <p>По данным разведки, группа преступников планирует ограбление на сегодняшнюю ночь.</p>
                <p>Ваша задача - укрепить защиту банка и предотвратить ограбление.</p>
            </div>
            
            <div class="security-level">
                <span>Уровень безопасности:</span>
                <div class="security-bar">
                    <div class="security-fill" id="security-level" style="width: 60%"></div>
                </div>
                <span id="security-percent">60%</span>
            </div>
            
            <div class="choices">
                <div class="choice" data-choice="1">
                    <span class="choice-number">1</span>
                    Усилить охрану на главном входе
                </div>
                <div class="choice" data-choice="2">
                    <span class="choice-number">2</span>
                    Проверить и обновить систему видеонаблюдения
                </div>
                <div class="choice" data-choice="3">
                    <span class="choice-number">3</span>
                    Активировать дополнительные датчики движения в хранилище
                </div>
                <div class="choice" data-choice="4">
                    <span class="choice-number">4</span>
                    Провести внеплановую проверку систем безопасности
                </div>
            </div>
            
            <div class="inventory">
                <h3>Доступные ресурсы:</h3>
                <div class="inventory-item">Персонал охраны: <span id="resource-guards">8</span> чел.</div>
                <div class="inventory-item">Камеры наблюдения: <span id="resource-cameras">24</span> шт.</div>
                <div class="inventory-item">Датчики движения: <span id="resource-sensors">12</span> шт.</div>
                <div class="inventory-item">Бюджет: $<span id="resource-budget">50,000</span></div>
                <div class="inventory-item">Лояльность персонала: <span id="resource-loyalty">85</span>%</div>
            </div>
            
            <!-- Область для случайных событий -->
            <div id="random-events-area"></div>
        </div>
        
        <!-- Остальные сцены (2-8) остаются без изменений -->
        <!-- Для экономии места я покажу только важные изменения -->
        
    </div>

    <script>
        // Упрощенная версия игры для отладки
        console.log('Скрипт загружен на Netlify!');

        let player = {
            name: '',
            surname: '',
            id: '',
            currentScene: 0
        };

        // Простая инициализация
        function initGame() {
            console.log('Инициализация игры...');
            
            const startBtn = document.getElementById('start-mission');
            console.log('Кнопка start-mission:', startBtn);
            
            if (startBtn) {
                startBtn.addEventListener('click', startMission);
                console.log('Обработчик добавлен к кнопке');
            } else {
                console.error('Кнопка не найдена!');
                // Попробуем найти кнопку через другой метод
                setTimeout(() => {
                    const retryBtn = document.getElementById('start-mission');
                    if (retryBtn) {
                        console.log('Кнопка найдена при повторной попытке');
                        retryBtn.addEventListener('click', startMission);
                    }
                }, 1000);
            }
        }

        function startMission() {
            console.log('Кнопка нажата! Начинаем миссию...');
            
            const nameInput = document.getElementById('player-name');
            const surnameInput = document.getElementById('player-surname');
            const idInput = document.getElementById('player-id');
            
            if (!nameInput || !surnameInput || !idInput) {
                alert('Ошибка: поля ввода не найдены');
                return;
            }
            
            player.name = nameInput.value.trim();
            player.surname = surnameInput.value.trim();
            player.id = idInput.value.trim();
            
            if (!player.name) {
                alert('Пожалуйста, введите ваше имя!');
                nameInput.focus();
                return;
            }
            
            if (!player.surname) {
                alert('Пожалуйста, введите вашу фамилию!');
                surnameInput.focus();
                return;
            }
            
            if (!player.id) {
                alert('Пожалуйста, введите ваш ID сотрудника!');
                idInput.focus();
                return;
            }
            
            // Показываем следующую сцену
            showScene(1);
            alert(`Добро пожаловать, ${player.name} ${player.surname}! Миссия начата.`);
        }

        function showScene(sceneNumber) {
            // Скрываем все сцены
            document.querySelectorAll('.scene').forEach(scene => {
                scene.classList.remove('active');
            });
            
            // Показываем нужную сцену
            const targetScene = document.getElementById(`scene-${sceneNumber}`);
            if (targetScene) {
                targetScene.classList.add('active');
                console.log(`Показана сцена ${sceneNumber}`);
            } else {
                console.error(`Сцена ${sceneNumber} не найдена`);
            }
            
            player.currentScene = sceneNumber;
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM полностью загружен');
            initGame();
        });

        // Альтернативная инициализация если DOMContentLoaded не сработал
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initGame);
        } else {
            initGame();
        }

        // Резервная инициализация через setTimeout
        setTimeout(initGame, 100);

        // Самый простой способ - добавить inline обработчик
        document.getElementById('start-mission').onclick = startMission;
    </script>
</body>
</html>
