<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ—Ç–µ–∫—Ç–∏–≤: –¢–∞–π–Ω–∞ –æ—Å–æ–±–Ω—è–∫–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #0c0c1d;
            color: #e6e6e6;
            min-height: 100vh;
            padding: 10px;
            padding-bottom: 80px;
        }
        
        .game-container {
            max-width: 100%;
            background: rgba(18, 18, 45, 0.95);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            border: 1px solid #2a2a5a;
            margin-bottom: 70px;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 15px;
            text-align: center;
            border-bottom: 2px solid #8e44ad;
        }
        
        h1 {
            font-size: 1.4rem;
            margin-bottom: 8px;
            color: #fff;
        }
        
        .subtitle {
            font-style: italic;
            color: #d2b4de;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
            font-size: 0.8rem;
        }
        
        .stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 15px;
        }
        
        .scene-container {
            padding: 15px;
            background: #141432;
        }
        
        .scene-image {
            height: 180px;
            background: #0f1a42;
            border-radius: 8px;
            margin-bottom: 10px;
            background-size: cover;
            background-position: center;
            position: relative;
            border: 2px solid #2a5298;
        }
        
        .hotspot {
            position: absolute;
            width: 32px;
            height: 32px;
            background: rgba(255, 215, 0, 0.7);
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid gold;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #000;
            font-size: 0.9rem;
            animation: pulse 2s infinite;
        }
        
        .hotspot:hover {
            background: rgba(255, 215, 0, 0.9);
            transform: scale(1.15);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .scene-description {
            background: rgba(30, 30, 70, 0.9);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #8e44ad;
            font-size: 0.85rem;
            line-height: 1.5;
            min-height: 70px;
        }
        
        .tabs {
            display: flex;
            background: #1a1a3a;
            border-bottom: 2px solid #2a5298;
        }
        
        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: #2c3e50;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
            border-right: 1px solid #1a1a3a;
        }
        
        .tab:last-child {
            border-right: none;
        }
        
        .tab.active {
            background: #8e44ad;
        }
        
        .tab-content {
            display: none;
            padding: 15px;
            background: #1a1a3a;
            min-height: 250px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .characters-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .character-card {
            background: rgba(52, 73, 94, 0.7);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #3a4a5a;
        }
        
        .character-card:hover {
            background: rgba(52, 73, 94, 0.9);
            transform: translateY(-2px);
        }
        
        .character-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            margin: 0 auto 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
        }
        
        .character-name {
            font-size: 0.85rem;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .character-role {
            font-size: 0.75rem;
            color: #bdc3c7;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        
        .inventory-item {
            aspect-ratio: 1;
            background: #2c3e50;
            border-radius: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #3a4a5a;
            font-size: 1.4rem;
        }
        
        .inventory-item:hover {
            background: #34495e;
        }
        
        .inventory-item.combined {
            background: rgba(142, 68, 173, 0.3);
            border-color: #8e44ad;
        }
        
        .clues-list {
            max-height: 180px;
            overflow-y: auto;
        }
        
        .clue {
            background: rgba(142, 68, 173, 0.15);
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 3px solid #8e44ad;
            font-size: 0.8rem;
            line-height: 1.4;
        }
        
        .controls {
            position: fixed;
            bottom: 10px;
            left: 10px;
            right: 10px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 8px;
            padding: 12px;
            background: #1a1a3a;
            border-radius: 12px;
            border: 2px solid #2a5298;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        
        .control-btn {
            padding: 10px;
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            min-height: 50px;
        }
        
        .control-btn:hover {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            transform: translateY(-2px);
        }
        
        .control-btn .icon {
            font-size: 1.2rem;
        }
        
        .control-btn .text {
            font-size: 0.7rem;
        }
        
        .hint-btn {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .accuse-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-content {
            background: #1a1a3a;
            padding: 20px;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
            border: 2px solid #8e44ad;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-title {
            color: #8e44ad;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .dialogue-text {
            margin-bottom: 15px;
            line-height: 1.5;
            font-size: 0.9rem;
        }
        
        .dialogue-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .dialogue-option {
            padding: 10px;
            background: #2c3e50;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
        }
        
        .dialogue-option:hover {
            background: #34495e;
        }
        
        .safe-display {
            font-size: 1.4rem;
            margin: 15px 0;
            padding: 10px;
            background: #141432;
            border-radius: 6px;
            text-align: center;
            letter-spacing: 3px;
        }
        
        .safe-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 15px 0;
        }
        
        .safe-btn {
            padding: 12px;
            font-size: 1.1rem;
            background: #2c3e50;
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .safe-btn:hover {
            background: #34495e;
        }
        
        .analysis-items {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .analysis-item {
            aspect-ratio: 1;
            background: #2c3e50;
            border-radius: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 1.4rem;
        }
        
        .analysis-item.selected {
            background: rgba(142, 68, 173, 0.5);
            border: 2px solid #8e44ad;
        }
        
        .ending-image {
            width: 100%;
            max-width: 200px;
            margin: 15px auto;
            border-radius: 8px;
            overflow: hidden;
            text-align: center;
            font-size: 3rem;
        }
        
        @media (max-width: 480px) {
            .characters-grid {
                grid-template-columns: 1fr;
            }
            
            .inventory-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .controls {
                grid-template-columns: 1fr 1fr 1fr 1fr;
                gap: 6px;
                padding: 10px;
            }
            
            .control-btn {
                padding: 8px;
                min-height: 45px;
            }
            
            .control-btn .icon {
                font-size: 1rem;
            }
            
            .control-btn .text {
                font-size: 0.65rem;
            }
            
            .modal-content {
                padding: 15px;
            }
            
            .scene-image {
                height: 160px;
            }
        }

        @media (min-width: 768px) {
            .game-container {
                max-width: 800px;
                margin: 0 auto 70px;
            }
            
            .scene-image {
                height: 250px;
            }
            
            .tab-content {
                min-height: 350px;
            }
            
            .controls {
                max-width: 800px;
                left: 50%;
                transform: translateX(-50%);
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>–¢–∞–π–Ω–∞ –æ—Å–æ–±–Ω—è–∫–∞ –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç–æ–≤</h1>
            <p class="subtitle">–ù–∞–π–¥–∏—Ç–µ —É–±–∏–π—Ü—É –ê—Ä—á–∏–±–∞–ª—å–¥–∞ –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç–∞</p>
            <div class="stats">
                <div class="stat">‚è±Ô∏è <span id="timeLeft">45:00</span></div>
                <div class="stat">üéØ <span id="cluesCount">0</span>/<span id="totalClues">15</span></div>
                <div class="stat">üí° <span id="hintsLeft">5</span></div>
            </div>
        </div>
        
        <div class="scene-container">
            <div class="scene-image" id="sceneImage">
                <!-- Hotspots will be added here -->
            </div>
            <div class="scene-description" id="sceneDescription">
                –í—ã —Å—Ç–æ–∏—Ç–µ —É –≤—Ö–æ–¥–∞ –≤ –æ—Å–æ–±–Ω—è–∫ –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç–æ–≤. –ù–æ—á—å—é –∑–¥–µ—Å—å –±—ã–ª–æ —Å–æ–≤–µ—Ä—à–µ–Ω–æ —É–±–∏–π—Å—Ç–≤–æ –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä–∞. –û—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Å–æ–±–Ω—è–∫, —Å–æ–±–µ—Ä–∏—Ç–µ —É–ª–∏–∫–∏ –∏ –Ω–∞–π–¥–∏—Ç–µ —É–±–∏–π—Ü—É!
            </div>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="characters">üë• –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</div>
            <div class="tab" data-tab="inventory">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
            <div class="tab" data-tab="clues">üìù –ó–∞–º–µ—Ç–∫–∏</div>
        </div>
        
        <div class="tab-content active" id="charactersTab">
            <div class="characters-grid">
                <div class="character-card" data-character="lawrence">
                    <div class="character-img">–õ</div>
                    <div class="character-name">–õ–æ—Ä–µ–Ω—Å –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç</div>
                    <div class="character-role">–°—ã–Ω, –Ω–∞—Å–ª–µ–¥–Ω–∏–∫</div>
                </div>
                <div class="character-card" data-character="isabella">
                    <div class="character-img">–ò</div>
                    <div class="character-name">–ò–∑–∞–±–µ–ª–ª–∞ –ö—Ä–æ—É–ª–∏</div>
                    <div class="character-role">–ü–ª–µ–º—è–Ω–Ω–∏—Ü–∞, —ç–∫—Å–ø–µ—Ä—Ç</div>
                </div>
                <div class="character-card" data-character="victor">
                    <div class="character-img">–í</div>
                    <div class="character-name">–í–∏–∫—Ç–æ—Ä –ú–æ—Ä–≥–∞–Ω</div>
                    <div class="character-role">–ë–∏–∑–Ω–µ—Å-–ø–∞—Ä—Ç–Ω—ë—Ä</div>
                </div>
                <div class="character-card" data-character="edgar">
                    <div class="character-img">–≠</div>
                    <div class="character-name">–≠–¥–≥–∞—Ä –°–º–∏—Ç</div>
                    <div class="character-role">–î–≤–æ—Ä–µ—Ü–∫–∏–π</div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="inventoryTab">
            <div class="inventory-grid" id="inventory">
                <!-- Inventory items will be added here -->
            </div>
            <button id="analyzeBtn" style="margin-top: 15px; width: 100%; padding: 10px; background: #8e44ad; color: white; border: none; border-radius: 6px; cursor: pointer;" disabled>–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É–ª–∏–∫–∏</button>
        </div>
        
        <div class="tab-content" id="cluesTab">
            <div class="clues-list" id="cluesList">
                <!-- Clues will be added here -->
            </div>
        </div>
    </div>
    
    <!-- –§–ò–ö–°–ò–†–û–í–ê–ù–ù–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï -->
    <div class="controls">
        <button class="control-btn" id="prevScene">
            <span class="icon">‚Üê</span>
            <span class="text">–ù–∞–∑–∞–¥</span>
        </button>
        <button class="control-btn" id="nextScene">
            <span class="icon">‚Üí</span>
            <span class="text">–í–ø–µ—Ä—ë–¥</span>
        </button>
        <button class="control-btn hint-btn" id="hintBtn">
            <span class="icon">üí°</span>
            <span class="text">–ü–æ–¥—Å–∫–∞–∑–∫–∞</span>
        </button>
        <button class="control-btn accuse-btn" id="accuseBtn">
            <span class="icon">‚öñÔ∏è</span>
            <span class="text">–û–±–≤–∏–Ω–∏—Ç—å</span>
        </button>
    </div>
    
    <!-- Dialogue Modal -->
    <div class="modal" id="dialogueModal">
        <div class="modal-content">
            <h3 class="modal-title" id="dialogueTitle">–î–∏–∞–ª–æ–≥</h3>
            <div class="dialogue-text" id="dialogueText"></div>
            <div class="dialogue-options" id="dialogueOptions"></div>
            <button id="closeDialogue" style="width: 100%; padding: 10px; background: #8e44ad; color: white; border: none; border-radius: 6px; cursor: pointer;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
    
    <!-- Safe Modal -->
    <div class="modal" id="safeModal">
        <div class="modal-content">
            <h3 class="modal-title">–°–µ–π—Ñ –ê—Ä—á–∏–±–∞–ª—å–¥–∞</h3>
            <p>–ö–æ–¥: –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ–±–∞–∫–∏ (–¥–¥–º–º)</p>
            <div class="safe-display" id="safeDisplay">----</div>
            <div class="safe-controls">
                <button class="safe-btn" data-number="1">1</button>
                <button class="safe-btn" data-number="2">2</button>
                <button class="safe-btn" data-number="3">3</button>
                <button class="safe-btn" data-number="4">4</button>
                <button class="safe-btn" data-number="5">5</button>
                <button class="safe-btn" data-number="6">6</button>
                <button class="safe-btn" data-number="7">7</button>
                <button class="safe-btn" data-number="8">8</button>
                <button class="safe-btn" data-number="9">9</button>
                <button class="safe-btn" data-number="0">0</button>
                <button class="safe-btn" id="safeClear">C</button>
                <button class="safe-btn" id="safeEnter">‚úì</button>
            </div>
            <button id="closeSafe" style="width: 100%; padding: 10px; background: #8e44ad; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px;">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
    
    <!-- Analysis Modal -->
    <div class="modal" id="analysisModal">
        <div class="modal-content">
            <h3 class="modal-title">–ê–Ω–∞–ª–∏–∑ —É–ª–∏–∫</h3>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ 2 —É–ª–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:</p>
            <div class="analysis-items" id="analysisItems"></div>
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button id="analyzeItems" style="flex: 2; padding: 10px; background: #8e44ad; color: white; border: none; border-radius: 6px; cursor: pointer;">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                <button id="cancelAnalysis" style="flex: 1; padding: 10px; background: #7f8c8d; color: white; border: none; border-radius: 6px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>
    
    <!-- Accusation Modal -->
    <div class="modal" id="accusationModal">
        <div class="modal-content">
            <h3 class="modal-title">–ö—Ç–æ —É–±–∏–π—Ü–∞?</h3>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º–æ–≥–æ:</p>
            <div class="characters-grid" style="margin: 15px 0;">
                <div class="character-card accuse-option" data-suspect="–õ–æ—Ä–µ–Ω—Å">
                    <div class="character-img">–õ</div>
                    <div class="character-name">–õ–æ—Ä–µ–Ω—Å</div>
                </div>
                <div class="character-card accuse-option" data-suspect="–ò–∑–∞–±–µ–ª–ª–∞">
                    <div class="character-img">–ò</div>
                    <div class="character-name">–ò–∑–∞–±–µ–ª–ª–∞</div>
                </div>
                <div class="character-card accuse-option" data-suspect="–í–∏–∫—Ç–æ—Ä">
                    <div class="character-img">–í</div>
                    <div class="character-name">–í–∏–∫—Ç–æ—Ä</div>
                </div>
                <div class="character-card accuse-option" data-suspect="–≠–¥–≥–∞—Ä">
                    <div class="character-img">–≠</div>
                    <div class="character-name">–≠–¥–≥–∞—Ä</div>
                </div>
            </div>
            <div style="display: flex; gap: 10px;">
                <button id="confirmAccusation" style="flex: 2; padding: 10px; background: #e74c3c; color: white; border: none; border-radius: 6px; cursor: pointer;">–û–±–≤–∏–Ω–∏—Ç—å</button>
                <button id="cancelAccusation" style="flex: 1; padding: 10px; background: #7f8c8d; color: white; border: none; border-radius: 6px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>
    
    <!-- Ending Modal -->
    <div class="modal" id="endingModal">
        <div class="modal-content">
            <h3 class="modal-title" id="endingTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
            <div class="ending-image" id="endingImage"></div>
            <div class="dialogue-text" id="endingText"></div>
            <button id="restartGame" style="width: 100%; padding: 10px; background: #8e44ad; color: white; border: none; border-radius: 6px; cursor: pointer;">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>

    <script>
        const gameState = {
            currentScene: 0,
            inventory: [],
            clues: [],
            killer: "",
            safeCode: "",
            timeLeft: 45 * 60,
            hints: 5,
            accused: null,
            examinedItems: new Set(),
            combinedClues: new Set(),
            characterDialogues: {},
            foundClues: new Set(),
            totalClues: 15,
            safeOpened: false,
            keyFound: false,
            postcardFound: false // –ù–æ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω–æ–π –æ—Ç–∫—Ä—ã—Ç–∫–∏
        };

        const scenes = [
            {
                name: "–í—Ö–æ–¥ –≤ –æ—Å–æ–±–Ω—è–∫",
                description: "–í—ã —Å—Ç–æ–∏—Ç–µ –ø–µ—Ä–µ–¥ –≤–µ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ—Å–æ–±–Ω—è–∫–æ–º –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç–æ–≤. –ú–∞—Å—Å–∏–≤–Ω–∞—è –¥—É–±–æ–≤–∞—è –¥–≤–µ—Ä—å –≤–µ–¥—ë—Ç –≤–Ω—É—Ç—Ä—å.",
                image: "#1a1a2e",
                hotspots: [
                    { x: 50, y: 60, item: "door", description: "–í—Ö–æ–¥–Ω–∞—è –¥–≤–µ—Ä—å" },
                    { x: 80, y: 30, item: "window", description: "–û–∫–Ω–æ –≥–æ—Å—Ç–∏–Ω–æ–π" },
                    { x: 20, y: 40, item: "mailbox", description: "–ü–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫" },
                    { x: 65, y: 75, item: "plant", description: "–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ" }
                ]
            },
            {
                name: "–ì–æ—Å—Ç–∏–Ω–∞—è", 
                description: "–†–æ—Å–∫–æ—à–Ω–∞—è –≥–æ—Å—Ç–∏–Ω–∞—è —Å –≤—ã—Å–æ–∫–∏–º–∏ –ø–æ—Ç–æ–ª–∫–∞–º–∏ –∏ –∫–∞–º–∏–Ω–æ–º –∏–∑ —á—ë—Ä–Ω–æ–≥–æ –º—Ä–∞–º–æ—Ä–∞.",
                image: "#2c3e50",
                hotspots: [
                    { x: 70, y: 40, item: "desk", description: "–ü–∏—Å—å–º–µ–Ω–Ω—ã–π —Å—Ç–æ–ª" },
                    { x: 30, y: 50, item: "fireplace", description: "–ö–∞–º–∏–Ω" },
                    { x: 60, y: 70, item: "bookcase", description: "–ö–Ω–∏–∂–Ω—ã–π —à–∫–∞—Ñ" },
                    { x: 45, y: 25, item: "painting", description: "–ö–∞—Ä—Ç–∏–Ω–∞ –Ω–∞ —Å—Ç–µ–Ω–µ" }
                ]
            },
            {
                name: "–ö–∞–±–∏–Ω–µ—Ç",
                description: "–ö–∞–±–∏–Ω–µ—Ç –ê—Ä—á–∏–±–∞–ª—å–¥–∞ –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç–∞. –ü–æ–ª–∫–∏ –∑–∞—Å—Ç–∞–≤–ª–µ–Ω—ã —Ä–µ–¥–∫–∏–º–∏ –∫–Ω–∏–≥–∞–º–∏.",
                image: "#34495e",
                hotspots: [
                    { x: 40, y: 60, item: "safe", description: "–°–µ–π—Ñ" },
                    { x: 70, y: 30, item: "books", description: "–ö–æ–ª–ª–µ–∫—Ü–∏—è –∫–Ω–∏–≥" },
                    { x: 20, y: 40, item: "drawer", description: "–Ø—â–∏–∫ —Å—Ç–æ–ª–∞" },
                    { x: 55, y: 75, item: "globe", description: "–°—Ç–∞—Ä–∏–Ω–Ω—ã–π –≥–ª–æ–±—É—Å" }
                ]
            },
            {
                name: "–°–ø–∞–ª—å–Ω—è",
                description: "–°–ø–∞–ª—å–Ω—è –ê—Ä—á–∏–±–∞–ª—å–¥–∞. –ü—Ä–æ—Å—Ç–æ—Ä–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ —Å –±–æ–ª—å—à–æ–π –∫—Ä–æ–≤–∞—Ç—å—é –ø–æ–¥ –±–∞–ª–¥–∞—Ö–∏–Ω–æ–º.",
                image: "#2d3436",
                hotspots: [
                    { x: 40, y: 50, item: "bed", description: "–ö—Ä–æ–≤–∞—Ç—å" },
                    { x: 70, y: 30, item: "closet", description: "–ì–∞—Ä–¥–µ—Ä–æ–±" },
                    { x: 20, y: 70, item: "nightstand", description: "–ü—Ä–∏–∫—Ä–æ–≤–∞—Ç–Ω–∞—è —Ç—É–º–±–æ—á–∫–∞" },
                    { x: 60, y: 45, item: "mirror", description: "–ó–µ—Ä–∫–∞–ª–æ" }
                ]
            },
            {
                name: "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞",
                description: "–û–±—à–∏—Ä–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å —Ç—ã—Å—è—á–∞–º–∏ –∫–Ω–∏–≥ –≤ –∫–æ–∂–∞–Ω—ã—Ö –ø–µ—Ä–µ–ø–ª—ë—Ç–∞—Ö.",
                image: "#2c3e50",
                hotspots: [
                    { x: 50, y: 40, item: "table", description: "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å—Ç–æ–ª" },
                    { x: 80, y: 60, item: "ladder", description: "–õ–µ—Å—Ç–Ω–∏—Ü–∞ –¥–ª—è –∫–Ω–∏–≥" },
                    { x: 20, y: 70, item: "cabinet", description: "–®–∫–∞—Ñ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏" },
                    { x: 35, y: 25, item: "armchair", description: "–ö—Ä–µ—Å–ª–æ –¥–ª—è —á—Ç–µ–Ω–∏—è" }
                ]
            },
            {
                name: "–°—Ç–æ–ª–æ–≤–∞—è",
                description: "–ü—Ä–æ—Å—Ç–æ—Ä–Ω–∞—è —Å—Ç–æ–ª–æ–≤–∞—è —Å –¥–ª–∏–Ω–Ω—ã–º –¥—É–±–æ–≤—ã–º —Å—Ç–æ–ª–æ–º –∏ —Ö—Ä—É—Å—Ç–∞–ª—å–Ω–æ–π –ª—é—Å—Ç—Ä–æ–π.",
                image: "#34495e",
                hotspots: [
                    { x: 50, y: 60, item: "table", description: "–û–±–µ–¥–µ–Ω–Ω—ã–π —Å—Ç–æ–ª" },
                    { x: 75, y: 35, item: "sideboard", description: "–ë—É—Ñ–µ—Ç" },
                    { x: 25, y: 45, item: "window2", description: "–û–∫–Ω–æ –≤ —Å–∞–¥" },
                    { x: 60, y: 25, item: "carpet", description: "–ö–æ–≤—ë—Ä" }
                ]
            }
        ];

        const items = {
            letter: { name: "–ü–∏—Å—å–º–æ —Å —É–≥—Ä–æ–∑–∞–º–∏", emoji: "‚úâÔ∏è", combinable: true },
            key: { name: "–ö–ª—é—á –æ—Ç —Å–µ–π—Ñ–∞", emoji: "üîë", combinable: false },
            photo: { name: "–°—Ç–∞—Ä–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è", emoji: "üñºÔ∏è", combinable: true },
            book: { name: "–õ–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫", emoji: "üìñ", combinable: true },
            poison: { name: "–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–ª–∞–∫–æ–Ω", emoji: "üß™", combinable: true },
            document: { name: "–í–∞–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç", emoji: "üìÑ", combinable: true },
            glove: { name: "–ü–µ—Ä—á–∞—Ç–∫–∞", emoji: "üß§", combinable: true },
            receipt: { name: "–ß–µ–∫ –∏–∑ –∞–ø—Ç–µ–∫–∏", emoji: "üßæ", combinable: true },
            note: { name: "–ó–∞–ø–∏—Å–∫–∞", emoji: "üìù", combinable: true },
            jewelry: { name: "–î–æ—Ä–æ–≥–æ–µ —É–∫—Ä–∞—à–µ–Ω–∏–µ", emoji: "üíé", combinable: true },
            watch: { name: "–ù–∞—Ä—É—á–Ω—ã–µ —á–∞—Å—ã", emoji: "‚åö", combinable: true },
            cigarette: { name: "–û–∫—É—Ä–æ–∫ —Å–∏–≥–∞—Ä–µ—Ç—ã", emoji: "üö¨", combinable: true }
        };

        const dialogueDatabase = {
            lawrence: {
                initial: [
                    "–û—Ç–µ—Ü –∏ —è –∏–º–µ–ª–∏ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è, –Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Å–µ–º—å–∏.",
                    "–Ø –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ –º–æ–≥—É –ø–æ–≤–µ—Ä–∏—Ç—å –≤ —Å–ª—É—á–∏–≤—à–µ–µ—Å—è...",
                    "–û—Ç–µ—Ü –±—ã–ª —Å—Ç—Ä–æ–≥–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º, –Ω–æ —è –µ–≥–æ —É–≤–∞–∂–∞–ª.",
                    "–ú—ã —Ä–µ–¥–∫–æ –≤–∏–¥–µ–ª–∏—Å—å –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è."
                ],
                responses: {
                    alibi: [
                        "–í –Ω–æ—á—å —É–±–∏–π—Å—Ç–≤–∞ —è –±—ã–ª –≤ –∫–ª—É–±–µ, –Ω–æ —É—Ö–æ–¥–∏–ª –ø–æ –ª–∏—á–Ω—ã–º –¥–µ–ª–∞–º.",
                        "–Ø –≤–µ—Ä–Ω—É–ª—Å—è –¥–æ–º–æ–π –ø–æ–∑–¥–Ω–æ, —É–∂–µ –ø–æ—Å–ª–µ –ø–æ–ª—É–Ω–æ—á–∏.",
                        "–ë—ã–ª –Ω–∞ –¥–µ–ª–æ–≤–æ–π –≤—Å—Ç—Ä–µ—á–µ, –º–æ–≥—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∞–ª–∏–±–∏.",
                        "–í —Ç–æ—Ç –≤–µ—á–µ—Ä —è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª —Å–µ–±—è –ø–ª–æ—Ö–æ –∏ —Ä–∞–Ω–æ –ª—ë–≥ —Å–ø–∞—Ç—å."
                    ],
                    isabella: [
                        "–ò–∑–∞–±–µ–ª–ª–∞ —Å–ª–∏—à–∫–æ–º —É–≤–ª–µ—á–µ–Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –æ—Ç—Ü–∞.",
                        "–û–Ω–∞ –≤—Å–µ–≥–¥–∞ —Ö–æ—Ç–µ–ª–∞ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞–Ω—Ç–∏–∫–≤–∞—Ä–∏–∞—Ç—É.",
                        "–ò–∑–∞–±–µ–ª–ª–∞ –∏ –æ—Ç–µ—Ü —á–∞—Å—Ç–æ —Å–ø–æ—Ä–∏–ª–∏ –æ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤.",
                        "–û–Ω–∞ —ç–∫—Å–ø–µ—Ä—Ç, –Ω–æ –∏–Ω–æ–≥–¥–∞ –µ—ë –æ–¥–µ—Ä–∂–∏–º–æ—Å—Ç—å –ø—É–≥–∞–ª–∞."
                    ],
                    victor: [
                        "–í–∏–∫—Ç–æ—Ä —á–∞—Å—Ç–æ —Å–ø–æ—Ä–∏–ª —Å –æ—Ç—Ü–æ–º –æ –±–∏–∑–Ω–µ—Å–µ.",
                        "–ò—Ö –¥–µ–ª–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –±—ã–ª–∏ –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–º–∏.",
                        "–í–∏–∫—Ç–æ—Ä —Ö–æ—Ç–µ–ª –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –∫–æ–º–ø–∞–Ω–∏–µ–π.",
                        "–û—Ç–µ—Ü –Ω–µ –¥–æ–≤–µ—Ä—è–ª –í–∏–∫—Ç–æ—Ä—É –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è."
                    ],
                    edgar: [
                        "–≠–¥–≥–∞—Ä —Ä–∞–±–æ—Ç–∞–ª –∑–¥–µ—Å—å –º–Ω–æ–≥–æ –ª–µ—Ç, –Ω–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å—Ç—Ä–∞–Ω–Ω–æ —Å–µ–±—è –≤—ë–ª.",
                        "–û—Ç–µ—Ü —Å–æ–±–∏—Ä–∞–ª—Å—è —É–≤–æ–ª–∏—Ç—å –≠–¥–≥–∞—Ä–∞, –Ω–æ –Ω–µ —É—Å–ø–µ–ª.",
                        "–≠–¥–≥–∞—Ä –∑–Ω–∞–ª –≤—Å–µ –ø—Ä–∏–≤—ã—á–∫–∏ –æ—Ç—Ü–∞.",
                        "–û–Ω –≤—Å–µ–≥–¥–∞ –±—ã–ª –≤ –∫—É—Ä—Å–µ —Å–µ–º–µ–π–Ω—ã—Ö –¥–µ–ª."
                    ],
                    motives: [
                        "–ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ, –Ω–æ —É –º–µ–Ω—è —Å–≤–æ–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞.",
                        "–û—Ç–µ—Ü —Å–æ–±–∏—Ä–∞–ª—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–≤–µ—â–∞–Ω–∏–µ.",
                        "–£ –Ω–∞—Å –±—ã–ª–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è.",
                        "–Ø —Ö–æ—Ç–µ–ª –±–æ–ª—å—à–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –±–∏–∑–Ω–µ—Å–µ."
                    ]
                }
            },
            isabella: {
                initial: [
                    "–î—è–¥—è –ê—Ä—á–∏–±–∞–ª—å–¥ –±—ã–ª –¥–ª—è –º–µ–Ω—è –∫–∞–∫ –æ—Ç–µ—Ü.",
                    "–Ø –¥–æ —Å–∏—Ö –ø–æ—Ä –≤ —à–æ–∫–µ –æ—Ç –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–≥–æ...",
                    "–î—è–¥—è –º–Ω–æ–≥–æ–º—É –º–µ–Ω—è –Ω–∞—É—á–∏–ª –≤ –∞–Ω—Ç–∏–∫–≤–∞—Ä–∏–∞—Ç–µ.",
                    "–ú—ã –±—ã–ª–∏ –æ—á–µ–Ω—å –±–ª–∏–∑–∫–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≥–æ–¥—ã."
                ],
                responses: {
                    alibi: [
                        "–Ø –±—ã–ª–∞ –≤ —Å–≤–æ–µ–π –∫–æ–º–Ω–∞—Ç–µ, –Ω–æ —Å–ª—ã—à–∞–ª–∞ –≥–æ–ª–æ—Å–∞ –æ–∫–æ–ª–æ 22:00.",
                        "–ß–∏—Ç–∞–ª–∞ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –¥–æ –ø–æ–∑–¥–Ω–µ–π –Ω–æ—á–∏.",
                        "–†–∞–∑–±–∏—Ä–∞–ª–∞ –Ω–æ–≤—É—é –ø–∞—Ä—Ç–∏—é –∞–Ω—Ç–∏–∫–≤–∞—Ä–∏–∞—Ç–∞.",
                        "–†–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–ª–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É —Å –∫–æ–ª–ª–µ–≥–æ–π."
                    ],
                    lawrence: [
                        "–õ–æ—Ä–µ–Ω—Å –∏–º–µ–ª —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç—Ü–æ–º.",
                        "–û–Ω–∏ —Å–µ—Ä—å—ë–∑–Ω–æ –ø–æ—Å—Å–æ—Ä–∏–ª–∏—Å—å –Ω–∞–∫–∞–Ω—É–Ω–µ —É–±–∏–π—Å—Ç–≤–∞.",
                        "–õ–æ—Ä–µ–Ω—Å —á–∞—Å—Ç–æ –ø—Ä–æ—Å–∏–ª –¥–µ–Ω—å–≥–∏ —É –¥—è–¥–∏.",
                        "–û—Ç–µ—Ü –∏ —Å—ã–Ω —Ä–µ–¥–∫–æ –Ω–∞—Ö–æ–¥–∏–ª–∏ –æ–±—â–∏–π —è–∑—ã–∫."
                    ],
                    victor: [
                        "–í–∏–∫—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª—Å—è —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –∫–æ–ª–ª–µ–∫—Ü–∏–∏.",
                        "–û–Ω –ø—Ä–µ–¥–ª–∞–≥–∞–ª –ø—Ä–æ–¥–∞—Ç—å —á–∞—Å—Ç—å –∞–Ω—Ç–∏–∫–≤–∞—Ä–∏–∞—Ç–∞.",
                        "–í–∏–∫—Ç–æ—Ä –∏ –¥—è–¥—è —Å–ø–æ—Ä–∏–ª–∏ –æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö.",
                        "–û–Ω —Å–ª–∏—à–∫–æ–º –≤–º–µ—à–∏–≤–∞–ª—Å—è –≤ —Å–µ–º–µ–π–Ω—ã–µ –¥–µ–ª–∞."
                    ],
                    edgar: [
                        "–≠–¥–≥–∞—Ä —á–∞—Å—Ç–æ –ø–æ–¥—Å–ª—É—à–∏–≤–∞–ª —Ä–∞–∑–≥–æ–≤–æ—Ä—ã.",
                        "–û–Ω –∑–Ω–∞–ª —Ä–∞—Å–ø–æ—Ä—è–¥–æ–∫ –¥–Ω—è –ª—É—á—à–µ –≤—Å–µ—Ö.",
                        "–≠–¥–≥–∞—Ä –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –±—ã–ª –æ—á–µ–Ω—å –Ω–µ—Ä–≤–Ω—ã–º.",
                        "–û–Ω –º–æ–≥ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –ø–æ –¥–æ–º—É."
                    ],
                    motives: [
                        "–î—è–¥—è –æ–±–µ—â–∞–ª –ø–µ—Ä–µ–¥–∞—Ç—å –º–Ω–µ —á–∞—Å—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏.",
                        "–ú—ã —Å–ø–æ—Ä–∏–ª–∏ –æ –º–µ—Ç–æ–¥–∞—Ö —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏–∏.",
                        "–Ø —Ö–æ—Ç–µ–ª–∞ –±–æ–ª—å—à–µ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é.",
                        "–î—è–¥—è –Ω–µ –æ–¥–æ–±—Ä—è–ª –º–æ–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã."
                    ]
                }
            },
            victor: {
                initial: [
                    "–ê—Ä—á–∏–±–∞–ª—å–¥ –∏ —è –±—ã–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏ –º–Ω–æ–≥–æ –ª–µ—Ç.",
                    "–≠—Ç–æ —É–∂–∞—Å–Ω–∞—è —Ç—Ä–∞–≥–µ–¥–∏—è –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å...",
                    "–ú—ã —Å—Ç—Ä–æ–∏–ª–∏ –±–∏–∑–Ω–µ—Å –≤–º–µ—Å—Ç–µ –¥–æ–ª–≥–∏–µ –≥–æ–¥—ã.",
                    "–ê—Ä—á–∏–±–∞–ª—å–¥ –±—ã–ª –±–ª–µ—Å—Ç—è—â–∏–º —Å—Ç—Ä–∞—Ç–µ–≥–æ–º."
                ],
                responses: {
                    alibi: [
                        "–Ø —É—à—ë–ª –æ–∫–æ–ª–æ 21:30, –Ω–æ –≤–∏–¥–µ–ª –∫–æ–≥–æ-—Ç–æ —É –æ—Å–æ–±–Ω—è–∫–∞.",
                        "–ë—ã–ª –Ω–∞ –¥–µ–ª–æ–≤–æ–º —É–∂–∏–Ω–µ, –º–æ–≥—É –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å.",
                        "–í–µ—Ä–Ω—É–ª—Å—è –≤ –æ—Ç–µ–ª—å –∏ –Ω–∏–∫—É–¥–∞ –Ω–µ –≤—ã—Ö–æ–¥–∏–ª.",
                        "–†–∞–±–æ—Ç–∞–ª –Ω–∞–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –¥–æ –ø–æ–∑–¥–Ω–µ–π –Ω–æ—á–∏."
                    ],
                    lawrence: [
                        "–õ–æ—Ä–µ–Ω—Å —É–º–æ–ª—è–ª –æ—Ç—Ü–∞ –æ –¥–µ–Ω—å–≥–∞—Ö.",
                        "–û—Ç–µ—Ü –∏ —Å—ã–Ω –∏–º–µ–ª–∏ —Å–µ—Ä—å—ë–∑–Ω—ã–µ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è.",
                        "–õ–æ—Ä–µ–Ω—Å –Ω–µ —Å–ø—Ä–∞–≤–ª—è–ª—Å—è —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º.",
                        "–û–Ω –º–æ–≥ —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ."
                    ],
                    isabella: [
                        "–ò–∑–∞–±–µ–ª–ª–∞ —Ö–æ—Ç–µ–ª–∞ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é.",
                        "–û–Ω–∞ —Å–ª–∏—à–∫–æ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ attached –∫ –∞–Ω—Ç–∏–∫–≤–∞—Ä–∏–∞—Ç—É.",
                        "–ò–∑–∞–±–µ–ª–ª–∞ –∏ –¥—è–¥—è —Å–ø–æ—Ä–∏–ª–∏ –æ –Ω–∞—Å–ª–µ–¥–∏–∏.",
                        "–û–Ω–∞ –≤–∏–¥–µ–ª–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å–≤–æ—ë –±—É–¥—É—â–µ–µ."
                    ],
                    edgar: [
                        "–≠–¥–≥–∞—Ä –∑–Ω–∞–ª –≤—Å–µ –ø—Ä–∏–≤—ã—á–∫–∏ –ê—Ä—á–∏–±–∞–ª—å–¥–∞.",
                        "–û–Ω –º–æ–≥ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –ø–æ –¥–æ–º—É.",
                        "–≠–¥–≥–∞—Ä —Å–ª—ã—à–∞–ª –≤—Å–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã.",
                        "–û–Ω –±—ã–ª –Ω–µ–¥–æ–≤–æ–ª–µ–Ω —Å–≤–æ–µ–π –ø–æ–∑–∏—Ü–∏–µ–π."
                    ],
                    motives: [
                        "–£ –Ω–∞—Å –±—ã–ª–∏ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è –ø–æ –ø–æ–≤–æ–¥—É –±–∏–∑–Ω–µ—Å–∞.",
                        "–ê—Ä—á–∏–±–∞–ª—å–¥ —Ö–æ—Ç–µ–ª –∏–∑–º–µ–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–∞.",
                        "–Ø –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –º–Ω–æ–≥–æ –≤ –Ω–∞—à—É –∫–æ–º–ø–∞–Ω–∏—é.",
                        "–ù–∞—à –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–¥ —É–≥—Ä–æ–∑–æ–π."
                    ]
                }
            },
            edgar: {
                initial: [
                    "–Ø —Å–ª—É–∂–∏–ª —Å–µ–º—å–µ –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç–æ–≤ 30 –ª–µ—Ç.",
                    "–≠—Ç–æ —É–∂–∞—Å–Ω–∞—è –ø–æ—Ç–µ—Ä—è –¥–ª—è –≤—Å–µ–π —Å–µ–º—å–∏...",
                    "–ú–∏—Å—Ç–µ—Ä –ê—Ä—á–∏–±–∞–ª—å–¥ –±—ã–ª —Ö–æ—Ä–æ—à–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º.",
                    "–Ø –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ –º–æ–≥—É –ø–æ–≤–µ—Ä–∏—Ç—å –≤ —Å–ª—É—á–∏–≤—à–µ–µ—Å—è."
                ],
                responses: {
                    alibi: [
                        "–í —Ç—É –Ω–æ—á—å —è —Ä–∞–Ω–æ —É—à—ë–ª –≤ —Å–≤–æ—é –∫–æ–º–Ω–∞—Ç—É.",
                        "–ó–∞–∫–∞–Ω—á–∏–≤–∞–ª —É–±–æ—Ä–∫—É –∏ –ø—Ä–æ–≤–µ—Ä—è–ª –∑–∞–º–∫–∏.",
                        "–°–ª—ã—à–∞–ª —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∑–≤—É–∫–∏ –æ–∫–æ–ª–æ 23:00.",
                        "–ö–∞–∫ –æ–±—ã—á–Ω–æ, –æ–±—Ö–æ–¥–∏–ª –¥–æ–º –ø–µ—Ä–µ–¥ —Å–Ω–æ–º."
                    ],
                    lawrence: [
                        "–ú–∏—Å—Ç–µ—Ä –õ–æ—Ä–µ–Ω—Å –∏ –º–∏—Å—Ç–µ—Ä –ê—Ä—á–∏–±–∞–ª—å–¥ —Å—Å–æ—Ä–∏–ª–∏—Å—å.",
                        "–û—Ç–µ—Ü –∏ —Å—ã–Ω —Ä–µ–¥–∫–æ –æ–±—â–∞–ª–∏—Å—å –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è.",
                        "–õ–æ—Ä–µ–Ω—Å —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏–ª –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.",
                        "–ò—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è –±—ã–ª–∏ –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–º–∏."
                    ],
                    isabella: [
                        "–ú–∏—Å—Å –ò–∑–∞–±–µ–ª–ª–∞ —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏–ª–∞ –≤ –∫–∞–±–∏–Ω–µ—Ç.",
                        "–û–Ω–∞ –∏ –¥—è–¥—è —Å–ø–æ—Ä–∏–ª–∏ –æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.",
                        "–ò–∑–∞–±–µ–ª–ª–∞ –∑–Ω–∞–ª–∞ —Ü–µ–Ω–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞.",
                        "–û–Ω–∞ –ø—Ä–æ–≤–æ–¥–∏–ª–∞ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π."
                    ],
                    victor: [
                        "–ú–∏—Å—Ç–µ—Ä –í–∏–∫—Ç–æ—Ä –æ—Å—Ç–∞–≤–ª—è–ª —Å—Ç—Ä–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.",
                        "–û–Ω –∏ –º–∏—Å—Ç–µ—Ä –ê—Ä—á–∏–±–∞–ª—å–¥ —Å–ø–æ—Ä–∏–ª–∏ –æ —Ñ–∏–Ω–∞–Ω—Å–∞—Ö.",
                        "–í–∏–∫—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –¥–æ–º–∞.",
                        "–û–Ω —á–∞—Å—Ç–æ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–ª—Å—è –ø–æ—Å–ª–µ –≤—Å—Ç—Ä–µ—á."
                    ],
                    motives: [
                        "–ú–∏—Å—Ç–µ—Ä –ê—Ä—á–∏–±–∞–ª—å–¥ —Å–æ–±–∏—Ä–∞–ª—Å—è –º–µ–Ω—è —É–≤–æ–ª–∏—Ç—å.",
                        "–£ –Ω–∞—Å –±—ã–ª–∏ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è –ø–æ –ø–æ–≤–æ–¥—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–æ–º.",
                        "–Ø –∑–Ω–∞–ª –º–Ω–æ–≥–∏–µ —Å–µ–º–µ–π–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã.",
                        "–ü—Ä–æ—Ä–∞–±–æ—Ç–∞–≤ 30 –ª–µ—Ç, —è –æ–∂–∏–¥–∞–ª –±–æ–ª—å—à–µ–≥–æ —É–≤–∞–∂–µ–Ω–∏—è."
                    ]
                }
            }
        };

        const clueCombinations = {
            "letter+photo": [
                "–ü–∏—Å—å–º–æ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Å—Ç–∞—Ä—É—é —Å–µ–º–µ–π–Ω—É—é —Ç–∞–π–Ω—É.",
                "–ù–∞ –æ–±–æ—Ä–æ—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–∞–π–¥–µ–Ω—ã —Å–ª–µ–¥—ã —á–µ—Ä–Ω–∏–ª –æ—Ç –ø–∏—Å—å–º–∞.",
                "–ü–∏—Å—å–º–æ –∏ —Ñ–æ—Ç–æ —Å–≤—è–∑–∞–Ω—ã —Å –ø—Ä–æ—à–ª—ã–º —Å–µ–º—å–∏ –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç–æ–≤."
            ],
            "book+document": [
                "–î–Ω–µ–≤–Ω–∏–∫ –∏ –¥–æ–∫—É–º–µ–Ω—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ê—Ä—á–∏–±–∞–ª—å–¥–∞.",
                "–ó–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞.",
                "–î–æ–∫—É–º–µ–Ω—Ç –ø—Ä–æ–ª–∏–≤–∞–µ—Ç —Å–≤–µ—Ç –Ω–∞ –∑–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ."
            ],
            "poison+receipt": [
                "–§–ª–∞–∫–æ–Ω –∏ —á–µ–∫ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –Ω–µ–¥–∞–≤–Ω—é—é –ø–æ–∫—É–ø–∫—É —è–¥–∞.",
                "–°–ª–µ–¥—ã –≤–µ—â–µ—Å—Ç–≤–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤ —á–µ–∫–µ.",
                "–ß–µ–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —è–¥–∞."
            ],
            "glove+poison": [
                "–ù–∞ –ø–µ—Ä—á–∞—Ç–∫–µ –Ω–∞–π–¥–µ–Ω—ã —Å–ª–µ–¥—ã —è–¥–æ–≤–∏—Ç–æ–≥–æ –≤–µ—â–µ—Å—Ç–≤–∞.",
                "–ü–µ—Ä—á–∞—Ç–∫–∞ –∏ —Ñ–ª–∞–∫–æ–Ω –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Å–ª–µ–¥—ã.",
                "–†–∞–∑–º–µ—Ä –ø–µ—Ä—á–∞—Ç–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º—ã—Ö."
            ],
            "letter+book": [
                "–ü–∏—Å—å–º–æ —Å —É–≥—Ä–æ–∑–∞–º–∏ —Å–≤—è–∑–∞–Ω–æ —Å –∑–∞–ø–∏—Å—è–º–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ.",
                "–°—Ç–∏–ª—å –ø–∏—Å—å–º–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–æ—á–µ—Ä–∫–æ–º –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ.",
                "–£–≥—Ä–æ–∑—ã –≤ –ø–∏—Å—å–º–µ –æ–±—ä—è—Å–Ω—è—é—Ç –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –ê—Ä—á–∏–±–∞–ª—å–¥–∞."
            ],
            "jewelry+note": [
                "–£–∫—Ä–∞—à–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å–∫–∞ –Ω–∞–≤–æ–¥—è—Ç –Ω–∞ –º—ã—Å–ª—å –æ —à–∞–Ω—Ç–∞–∂–µ.",
                "–ó–∞–ø–∏—Å–∫–∞ —É–ø–æ–º–∏–Ω–∞–µ—Ç –ø—Ä–æ–ø–∞–≤—à–µ–µ —É–∫—Ä–∞—à–µ–Ω–∏–µ.",
                "–£–∫—Ä–∞—à–µ–Ω–∏–µ –±—ã–ª–æ –ø—Ä–µ–¥–º–µ—Ç–æ–º —Å–ø–æ—Ä–∞ –≤ —Å–µ–º—å–µ."
            ]
        };

        function generateRandomDialogues(killer) {
            const dialogues = {};
            const characters = ['lawrence', 'isabella', 'victor', 'edgar'];
            
            characters.forEach(character => {
                dialogues[character] = {
                    title: getCharacterTitle(character),
                    initial: getRandomElement(dialogueDatabase[character].initial),
                    responses: {}
                };
                
                Object.keys(dialogueDatabase[character].responses).forEach(responseType => {
                    dialogues[character].responses[responseType] = getRandomElement(dialogueDatabase[character].responses[responseType]);
                });
            });
            
            return dialogues;
        }
        
        function getCharacterTitle(character) {
            const titles = {
                lawrence: "–õ–æ—Ä–µ–Ω—Å –í–∞–Ω–¥–µ—Ä–±–∏–ª—å—Ç",
                isabella: "–ò–∑–∞–±–µ–ª–ª–∞ –ö—Ä–æ—É–ª–∏", 
                victor: "–í–∏–∫—Ç–æ—Ä –ú–æ—Ä–≥–∞–Ω",
                edgar: "–≠–¥–≥–∞—Ä –°–º–∏—Ç"
            };
            return titles[character];
        }
        
        function getRandomElement(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function initGame() {
            const suspects = ["–õ–æ—Ä–µ–Ω—Å", "–ò–∑–∞–±–µ–ª–ª–∞", "–í–∏–∫—Ç–æ—Ä", "–≠–¥–≥–∞—Ä"];
            gameState.killer = suspects[Math.floor(Math.random() * suspects.length)];
            
            const day = Math.floor(Math.random() * 28) + 1;
            const month = Math.floor(Math.random() * 12) + 1;
            gameState.safeCode = `${day < 10 ? '0' + day : day}${month < 10 ? '0' + month : month}`;
            
            gameState.characterDialogues = generateRandomDialogues(gameState.killer);
            
            console.log("–£–±–∏–π—Ü–∞:", gameState.killer);
            console.log("–ö–æ–¥ —Å–µ–π—Ñ–∞:", gameState.safeCode);
            console.log("–î–∏–∞–ª–æ–≥–∏:", gameState.characterDialogues);
            
            document.getElementById('totalClues').textContent = gameState.totalClues;
            
            renderScene();
            startTimer();
            setupEventListeners();
        }

        function renderScene() {
            const scene = scenes[gameState.currentScene];
            const sceneImage = document.getElementById('sceneImage');
            const sceneDescription = document.getElementById('sceneDescription');
            
            sceneImage.style.background = scene.image;
            sceneImage.innerHTML = '';
            sceneDescription.textContent = scene.description;
            
            scene.hotspots.forEach(hotspot => {
                const hotspotEl = document.createElement('div');
                hotspotEl.className = 'hotspot';
                hotspotEl.style.left = `${hotspot.x}%`;
                hotspotEl.style.top = `${hotspot.y}%`;
                hotspotEl.textContent = '?';
                hotspotEl.title = hotspot.description;
                hotspotEl.onclick = () => examineItem(hotspot.item, hotspot.description);
                sceneImage.appendChild(hotspotEl);
            });
        }

        function examineItem(item, description) {
            // –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï –î–õ–Ø –°–ï–ô–§–ê: –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –≤ examinedItems –∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "–≤—ã —É–∂–µ –æ—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏"
            if (item !== 'safe' && gameState.examinedItems.has(`${gameState.currentScene}-${item}`)) {
                document.getElementById('sceneDescription').textContent = 
                    `–í—ã —É–∂–µ –æ—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ ${description.toLowerCase()}.`;
                return;
            }

            // –î–ª—è –≤—Å–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∫—Ä–æ–º–µ —Å–µ–π—Ñ–∞ –¥–æ–±–∞–≤–ª—è–µ–º –≤ examinedItems
            if (item !== 'safe') {
                gameState.examinedItems.add(`${gameState.currentScene}-${item}`);
            }
            
            let clue = '';
            let foundItem = null;
            
            // –ì–ê–†–ê–ù–¢–ò–†–£–ï–ú, –ß–¢–û –ö–õ–Æ–ß –ë–£–î–ï–¢ –ù–ê–ô–î–ï–ù –ü–†–ò –û–°–ú–û–¢–†–ï –ü–ò–°–¨–ú–ï–ù–ù–û–ì–û –°–¢–û–õ–ê
            if (item === 'desk' && !gameState.keyFound) {
                clue = "–í —è—â–∏–∫–µ –Ω–∞—à–ª–∏ –∫–ª—é—á –æ—Ç —Å–µ–π—Ñ–∞.";
                foundItem = 'key';
                gameState.keyFound = true;
            } 
            // –ì–ê–†–ê–ù–¢–ò–†–£–ï–ú, –ß–¢–û –û–¢–ö–†–´–¢–ö–ê –° –ö–û–î–û–ú –ë–£–î–ï–¢ –ù–ê–ô–î–ï–ù–ê –í –ü–û–ß–¢–û–í–û–ú –Ø–©–ò–ö–ï
            else if (item === 'mailbox' && !gameState.postcardFound) {
                clue = `–ù–∞—à–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∫—É: ${gameState.safeCode.substring(0,2)}.${gameState.safeCode.substring(2,4)} - –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ–±–∞–∫–∏.`;
                gameState.postcardFound = true;
            }
            else {
                // –°–ª—É—á–∞–π–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Å–º–æ—Ç—Ä–∞ –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
                const roomClues = {
                    door: ["–ù–∞—à–ª–∏ –ø–∏—Å—å–º–æ —Å —É–≥—Ä–æ–∑–∞–º–∏.", "–û–±–Ω–∞—Ä—É–∂–∏–ª–∏ —Å–ª–µ–¥—ã –≤–∑–ª–æ–º–∞.", "–ù–∏—á–µ–≥–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ."],
                    window: ["–í–∏–¥–∏—Ç–µ —Ä–∞–∑–±–∏—Ç–æ–µ —Å—Ç–µ–∫–ª–æ.", "–ù–∞ –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫–µ —Å—Ç—Ä–∞–Ω–Ω—ã–µ —Å–ª–µ–¥—ã.", "–û–∫–Ω–æ –±—ã–ª–æ –æ—Ç–∫—Ä—ã—Ç–æ."],
                    mailbox: ["–ü–æ—á—Ç–∞ –Ω–µ —Ä–∞—Å–ø–µ—á–∞—Ç–∞–Ω–∞.", "–ü—É—Å—Ç–æ.", "–ù–∏—á–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ."],
                    plant: ["–í –≥–æ—Ä—à–∫–µ —Å–ø—Ä—è—Ç–∞–Ω–∞ –∑–∞–ø–∏—Å–∫–∞.", "–ó–µ–º–ª—è –≤ –≥–æ—Ä—à–∫–µ –≤–∑—Ä—ã—Ö–ª–µ–Ω–∞.", "–ù–∏—á–µ–≥–æ –Ω–µ–æ–±—ã—á–Ω–æ–≥–æ."],
                    desk: ["–ù–∞ —Å—Ç–æ–ª–µ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã.", "–í —è—â–∏–∫–µ –ø—É—Å—Ç–æ.", "–í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ."],
                    fireplace: ["–í –∑–æ–ª–µ –Ω–∞—à–ª–∏ –æ–±–≥–æ—Ä–µ–≤—à–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–Ω–µ–≤–Ω–∏–∫–∞.", "–í –∫–∞–º–∏–Ω–µ —Å—Ç—Ä–∞–Ω–Ω—ã–π –ø–µ–ø–µ–ª.", "–ö–∞–º–∏–Ω —á–∏—Å—Ç."],
                    bookcase: ["–ó–∞ –∫–Ω–∏–≥–∞–º–∏ —Å–ø—Ä—è—Ç–∞–Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è.", "–û–¥–Ω–∞ –∫–Ω–∏–≥–∞ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è.", "–û–±—ã—á–Ω—ã–µ –∫–Ω–∏–≥–∏."],
                    painting: ["–ó–∞ –∫–∞—Ä—Ç–∏–Ω–æ–π –Ω–∞–π–¥–µ–Ω —Ç–∞–π–Ω–∏–∫.", "–ö–∞—Ä—Ç–∏–Ω–∞ –≤–∏—Å–∏—Ç –Ω–µ—Ä–æ–≤–Ω–æ.", "–ù–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ."],
                    safe: ["–°–µ–π—Ñ –∑–∞–ø–µ—Ä—Ç. –ù—É–∂–µ–Ω –∫–ª—é—á.", "–ù–∞ —Å–µ–π—Ñ–µ —Ü–∞—Ä–∞–ø–∏–Ω—ã.", "–°–µ–π—Ñ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º."],
                    books: ["–í –∫–Ω–∏–≥–µ –∑–∞–∫–ª–∞–¥–∫–∞ —Å –ø–æ–º–µ—Ç–∫–∞–º–∏.", "–ù–∞—à–ª–∏ –ª—é–±–æ–≤–Ω—ã–µ –ø–∏—Å—å–º–∞.", "–û–±—ã—á–Ω—ã–µ –∫–Ω–∏–≥–∏."],
                    drawer: ["–í —è—â–∏–∫–µ –ª–µ–∂–∏—Ç —Ñ–ª–∞–∫–æ–Ω —Å —è–¥–æ–º.", "–ù–∞—à–ª–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.", "–ü—É—Å—Ç–æ."],
                    globe: ["–í–Ω—É—Ç—Ä–∏ –≥–ª–æ–±—É—Å–∞ —Å–ø—Ä—è—Ç–∞–Ω—ã —É–∫—Ä–∞—à–µ–Ω–∏—è.", "–ì–ª–æ–±—É—Å –∏—Å–ø–æ—Ä—á–µ–Ω.", "–û–±—ã—á–Ω—ã–π –≥–ª–æ–±—É—Å."],
                    bed: ["–ü–æ–¥ –ø–æ–¥—É—à–∫–æ–π –Ω–∞—à–ª–∏ –∑–∞–ø–∏—Å–∫—É.", "–ü–æ—Å—Ç–µ–ª—å –Ω–µ –∑–∞–ø—Ä–∞–≤–ª–µ–Ω–∞.", "–í—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ."],
                    closet: ["–í –∫–∞—Ä–º–∞–Ω–µ –ø–∏–¥–∂–∞–∫–∞ –Ω–∞—à–ª–∏ —á–µ–∫.", "–û–¥–µ–∂–¥–∞ –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–∞.", "–í—Å—ë –Ω–∞ –º–µ—Å—Ç–µ."],
                    nightstand: ["–í —Ç—É–º–±–æ—á–∫–µ –ª–µ–∂–∞—Ç —á–∞—Å—ã.", "–ù–∞—à–ª–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞.", "–ù–∏—á–µ–≥–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ."],
                    mirror: ["–í –æ—Ç—Ä–∞–∂–µ–Ω–∏–∏ —á—Ç–æ-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ.", "–ó–µ—Ä–∫–∞–ª–æ —Ç—Ä–µ—Å–Ω—É—Ç–æ.", "–û–±—ã—á–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ."],
                    table: ["–ù–∞ —Å—Ç–æ–ª–µ –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä—á–∞—Ç–∫–∞.", "–°—Ç–æ–ª –Ω–∞–∫—Ä—ã—Ç –¥–ª—è —É–∂–∏–Ω–∞.", "–í—Å—ë —á–∏—Å—Ç–æ."],
                    ladder: ["–ù–∞ —Å—Ç—É–ø–µ–Ω—å–∫–µ –æ–∫—É—Ä–æ–∫.", "–õ–µ—Å—Ç–Ω–∏—Ü–∞ —à–∞—Ç–∞–µ—Ç—Å—è.", "–û–±—ã—á–Ω–∞—è –ª–µ—Å—Ç–Ω–∏—Ü–∞."],
                    cabinet: ["–í —à–∫–∞—Ñ—É –Ω–∞–π–¥–µ–Ω –≤–∞–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.", "–î–æ–∫—É–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç—ã.", "–í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ."],
                    armchair: ["–í –∫—Ä–µ—Å–ª–µ –∑–∞–≤–∞–ª—è–ª–∞—Å—å –ø–µ—Ä—á–∞—Ç–∫–∞.", "–ü–æ–¥—É—à–∫–∞ —Å–¥–≤–∏–Ω—É—Ç–∞.", "–ù–∏—á–µ–≥–æ –Ω–µ–æ–±—ã—á–Ω–æ–≥–æ."],
                    sideboard: ["–í –±—É—Ñ–µ—Ç–µ —Å—Ç—Ä–∞–Ω–Ω—ã–π –∑–∞–ø–∞—Ö.", "–°–µ—Ä–≤–∏–∑ –Ω–µ –Ω–∞ –º–µ—Å—Ç–µ.", "–í—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ."],
                    window2: ["–ù–∞ –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫–µ —Å–ª–µ–¥—ã –≥—Ä—è–∑–∏.", "–ó–∞–Ω–∞–≤–µ—Å–∫–∏ –ø–æ—Ä–≤–∞–Ω—ã.", "–û–±—ã—á–Ω–æ–µ –æ–∫–Ω–æ."],
                    carpet: ["–ü–æ–¥ –∫–æ–≤—Ä–æ–º –ø—è—Ç–Ω–æ.", "–ö–æ–≤—ë—Ä —Å–¥–≤–∏–Ω—É—Ç.", "–ù–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ."]
                };

                if (roomClues[item]) {
                    const clues = roomClues[item];
                    clue = clues[Math.floor(Math.random() * clues.length)];
                } else {
                    clue = "–ù–∏—á–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.";
                }

                // –°–ª—É—á–∞–π–Ω–æ–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–∫—Ä–æ–º–µ –∫–ª—é—á–∞ –∏ —Å–µ–π—Ñ–∞)
                const isRedHerring = Math.random() < 0.3;
                if (!isRedHerring && Math.random() < 0.4 && item !== 'safe' && item !== 'mailbox') {
                    const availableItems = Object.keys(items).filter(itemKey => 
                        !gameState.inventory.includes(itemKey) && 
                        itemKey !== 'key' && // –ö–ª—é—á —Ç–µ–ø–µ—Ä—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–æ–ª–µ
                        (itemKey !== 'document' || item === 'cabinet')
                    );
                    
                    if (availableItems.length > 0) {
                        foundItem = availableItems[Math.floor(Math.random() * availableItems.length)];
                        clue += ` –ù–∞—à–ª–∏: ${items[foundItem].name}`;
                    }
                }
            }

            // –û–°–û–ë–ê–Ø –õ–û–ì–ò–ö–ê –î–õ–Ø –°–ï–ô–§–ê
            if (item === 'safe') {
                if (gameState.safeOpened) {
                    clue = "–°–µ–π—Ñ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç. –ë–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ.";
                } else if (gameState.inventory.includes('key')) {
                    openSafe();
                    return; // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ –æ—Ç–∫—Ä—ã–ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                } else {
                    clue = "–°–µ–π—Ñ –∑–∞–ø–µ—Ä—Ç. –ù—É–∂–µ–Ω –∫–ª—é—á –æ—Ç —Å–µ–π—Ñ–∞. –í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω –≥–¥–µ-—Ç–æ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ...";
                }
            }

            // –î–æ–±–∞–≤–ª—è–µ–º —É–ª–∏–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–∞
            if (clue && !gameState.foundClues.has(clue)) {
                gameState.foundClues.add(clue);
                addClue(clue);
            }
            
            if (foundItem && !gameState.inventory.includes(foundItem)) {
                gameState.inventory.push(foundItem);
                updateInventory();
            }
            
            document.getElementById('sceneDescription').textContent = clue;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —É–ª–∏–∫
            updateCluesCounter();
        }

        function updateCluesCounter() {
            const uniqueCluesCount = gameState.foundClues.size;
            document.getElementById('cluesCount').textContent = uniqueCluesCount;
        }

        function updateInventory() {
            const inventory = document.getElementById('inventory');
            inventory.innerHTML = '';
            
            gameState.inventory.forEach(itemId => {
                const item = items[itemId];
                const itemEl = document.createElement('div');
                itemEl.className = `inventory-item ${gameState.combinedClues.has(itemId) ? 'combined' : ''}`;
                itemEl.textContent = item.emoji;
                itemEl.title = item.name;
                itemEl.onclick = () => {
                    document.getElementById('sceneDescription').textContent = 
                        `–û—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ ${item.name.toLowerCase()}.`;
                };
                inventory.appendChild(itemEl);
            });
            
            document.getElementById('analyzeBtn').disabled = gameState.inventory.length < 2;
        }

        function addClue(text) {
            if (!gameState.clues.includes(text)) {
                gameState.clues.push(text);
                const cluesList = document.getElementById('cluesList');
                const clueEl = document.createElement('div');
                clueEl.className = 'clue';
                clueEl.textContent = text;
                cluesList.appendChild(clueEl);
                cluesList.scrollTop = cluesList.scrollHeight;
            }
        }

        function startTimer() {
            const timer = setInterval(() => {
                gameState.timeLeft--;
                const minutes = Math.floor(gameState.timeLeft / 60);
                const seconds = gameState.timeLeft % 60;
                document.getElementById('timeLeft').textContent = 
                    `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(timer);
                    showEnding('timeout');
                }
            }, 1000);
        }

        function setupEventListeners() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab + 'Tab').classList.add('active');
                });
            });

            document.getElementById('prevScene').addEventListener('click', () => {
                if (gameState.currentScene > 0) {
                    gameState.currentScene--;
                    renderScene();
                }
            });

            document.getElementById('nextScene').addEventListener('click', () => {
                if (gameState.currentScene < scenes.length - 1) {
                    gameState.currentScene++;
                    renderScene();
                }
            });

            document.querySelectorAll('.character-card').forEach(card => {
                card.addEventListener('click', () => {
                    if (!card.classList.contains('accuse-option')) {
                        const character = card.dataset.character;
                        startDialogue(character);
                    }
                });
            });

            document.getElementById('hintBtn').addEventListener('click', showHint);

            document.getElementById('analyzeBtn').addEventListener('click', showAnalysis);
            document.getElementById('analyzeItems').addEventListener('click', combineItems);
            document.getElementById('cancelAnalysis').addEventListener('click', () => {
                document.getElementById('analysisModal').style.display = 'none';
            });

            document.getElementById('accuseBtn').addEventListener('click', showAccusation);
            document.querySelectorAll('.accuse-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.accuse-option').forEach(o => {
                        o.style.background = '';
                        o.style.borderColor = '#3a4a5a';
                    });
                    this.style.background = 'rgba(142, 68, 173, 0.3)';
                    this.style.borderColor = '#8e44ad';
                    gameState.accused = this.dataset.suspect;
                });
            });
            document.getElementById('confirmAccusation').addEventListener('click', makeAccusation);
            document.getElementById('cancelAccusation').addEventListener('click', () => {
                document.getElementById('accusationModal').style.display = 'none';
            });

            document.querySelectorAll('.safe-btn').forEach(btn => {
                if (btn.id !== 'safeClear' && btn.id !== 'safeEnter') {
                    btn.addEventListener('click', function() {
                        const current = document.getElementById('safeDisplay').textContent.replace(/-/g, '');
                        if (current.length < 4) {
                            document.getElementById('safeDisplay').textContent = 
                                (current + this.dataset.number).padEnd(4, '-');
                        }
                    });
                }
            });
            document.getElementById('safeClear').addEventListener('click', () => {
                document.getElementById('safeDisplay').textContent = '----';
            });
            document.getElementById('safeEnter').addEventListener('click', checkSafeCode);
            document.getElementById('closeSafe').addEventListener('click', () => {
                document.getElementById('safeModal').style.display = 'none';
            });

            document.getElementById('restartGame').addEventListener('click', () => {
                location.reload();
            });

            document.getElementById('closeDialogue').addEventListener('click', () => {
                document.getElementById('dialogueModal').style.display = 'none';
            });
        }

        function openSafe() {
            document.getElementById('safeModal').style.display = 'flex';
            document.getElementById('safeDisplay').textContent = '----';
        }

        function checkSafeCode() {
            const entered = document.getElementById('safeDisplay').textContent.replace(/-/g, '');
            if (entered === gameState.safeCode) {
                gameState.safeOpened = true;
                if (!gameState.foundClues.has("–°–µ–π—Ñ –æ—Ç–∫—Ä—ã—Ç! –ù–∞–π–¥–µ–Ω –≤–∞–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.")) {
                    gameState.foundClues.add("–°–µ–π—Ñ –æ—Ç–∫—Ä—ã—Ç! –ù–∞–π–¥–µ–Ω –≤–∞–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.");
                    addClue("–°–µ–π—Ñ –æ—Ç–∫—Ä—ã—Ç! –ù–∞–π–¥–µ–Ω –≤–∞–∂–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.");
                    updateCluesCounter();
                }
                if (!gameState.inventory.includes('document')) {
                    gameState.inventory.push('document');
                    updateInventory();
                }
                document.getElementById('safeModal').style.display = 'none';
                document.getElementById('sceneDescription').textContent = "–°–µ–π—Ñ –æ—Ç–∫—Ä—ã—Ç! –ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Å –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.";
            } else {
                document.getElementById('sceneDescription').textContent = "–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.";
                document.getElementById('safeDisplay').textContent = '----';
            }
        }

        function startDialogue(character) {
            const dialogue = gameState.characterDialogues[character];
            document.getElementById('dialogueTitle').textContent = dialogue.title;
            document.getElementById('dialogueText').textContent = dialogue.initial;
            
            const options = document.getElementById('dialogueOptions');
            options.innerHTML = '';
            
            const questions = [
                { text: "–ì–¥–µ –≤—ã –±—ã–ª–∏ –≤ –Ω–æ—á—å —É–±–∏–π—Å—Ç–≤–∞?", type: "alibi" },
                { text: "–ß—Ç–æ –≤—ã –∑–Ω–∞–µ—Ç–µ –æ –õ–æ—Ä–µ–Ω—Å–µ?", type: "lawrence" },
                { text: "–ß—Ç–æ –≤—ã –∑–Ω–∞–µ—Ç–µ –æ–± –ò–∑–∞–±–µ–ª–ª–µ?", type: "isabella" },
                { text: "–ß—Ç–æ –≤—ã –∑–Ω–∞–µ—Ç–µ –æ –í–∏–∫—Ç–æ—Ä–µ?", type: "victor" },
                { text: "–ß—Ç–æ –≤—ã –∑–Ω–∞–µ—Ç–µ –æ–± –≠–¥–≥–∞—Ä–µ?", type: "edgar" },
                { text: "–ë—ã–ª–∏ –ª–∏ —É –≤–∞—Å –º–æ—Ç–∏–≤—ã?", type: "motives" }
            ];

            const shuffledQuestions = questions.sort(() => Math.random() - 0.5).slice(0, 4);

            shuffledQuestions.forEach(question => {
                const option = document.createElement('div');
                option.className = 'dialogue-option';
                option.textContent = question.text;
                option.onclick = () => {
                    const response = dialogue.responses[question.type];
                    document.getElementById('dialogueText').textContent = response;
                    const clueText = `${dialogue.title}: ${response}`;
                    if (!gameState.foundClues.has(clueText)) {
                        gameState.foundClues.add(clueText);
                        addClue(clueText);
                        updateCluesCounter();
                    }
                };
                options.appendChild(option);
            });
            
            document.getElementById('dialogueModal').style.display = 'flex';
        }

        function showHint() {
            if (gameState.hints > 0) {
                gameState.hints--;
                document.getElementById('hintsLeft').textContent = gameState.hints;
                
                const hints = [
                    "–û—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã - –∫–∞–∂–¥–∞—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —É–ª–∏–∫–∏.",
                    "–ü–æ–≥–æ–≤–æ—Ä–∏—Ç–µ —Å–æ –≤—Å–µ–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏, –∏—Ö —Ä–∞—Å—Å–∫–∞–∑—ã –º–æ–≥—É—Ç –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç—å.",
                    "–ö–æ–¥ —Å–µ–π—Ñ–∞ - –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —Å–æ–±–∞–∫–∏ –ê—Ä—á–∏–±–∞–ª—å–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î–ú–ú.",
                    "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —É–ª–∏–∫–∏ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.",
                    "–û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –¥–µ—Ç–∞–ª–∏ - –∏–Ω–æ–≥–¥–∞ –º–∞–ª–µ–Ω—å–∫–∞—è –¥–µ—Ç–∞–ª—å –∫–ª—é—á–µ–≤–∞—è."
                ];
                
                const hint = hints[Math.floor(Math.random() * hints.length)];
                if (!gameState.foundClues.has(`–ü–æ–¥—Å–∫–∞–∑–∫–∞: ${hint}`)) {
                    gameState.foundClues.add(`–ü–æ–¥—Å–∫–∞–∑–∫–∞: ${hint}`);
                    addClue(`–ü–æ–¥—Å–∫–∞–∑–∫–∞: ${hint}`);
                    updateCluesCounter();
                }
                document.getElementById('sceneDescription').textContent = `–ü–æ–¥—Å–∫–∞–∑–∫–∞: ${hint}`;
            } else {
                document.getElementById('sceneDescription').textContent = "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!";
            }
        }

        function showAnalysis() {
            const modal = document.getElementById('analysisModal');
            const itemsContainer = document.getElementById('analysisItems');
            itemsContainer.innerHTML = '';
            window.selectedItems = [];
            
            gameState.inventory.forEach(itemId => {
                const item = items[itemId];
                if (item.combinable && !gameState.combinedClues.has(itemId)) {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'analysis-item';
                    itemEl.textContent = item.emoji;
                    itemEl.title = item.name;
                    itemEl.onclick = function() {
                        if (window.selectedItems.includes(itemId)) {
                            window.selectedItems = window.selectedItems.filter(i => i !== itemId);
                            this.classList.remove('selected');
                        } else if (window.selectedItems.length < 2) {
                            window.selectedItems.push(itemId);
                            this.classList.add('selected');
                        }
                    };
                    itemsContainer.appendChild(itemEl);
                }
            });
            
            modal.style.display = 'flex';
        }

        function combineItems() {
            if (window.selectedItems.length !== 2) {
                alert("–í—ã–±–µ—Ä–∏—Ç–µ 2 —É–ª–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞!");
                return;
            }
            
            const key = window.selectedItems.sort().join('+');
            let result = "–≠—Ç–∏ —É–ª–∏–∫–∏ –Ω–µ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π.";
            
            if (clueCombinations[key]) {
                const possibleResults = clueCombinations[key];
                result = possibleResults[Math.floor(Math.random() * possibleResults.length)];
                
                window.selectedItems.forEach(item => {
                    gameState.combinedClues.add(item);
                });
            }
            
            if (!gameState.foundClues.has(`–ê–Ω–∞–ª–∏–∑ —É–ª–∏–∫: ${result}`)) {
                gameState.foundClues.add(`–ê–Ω–∞–ª–∏–∑ —É–ª–∏–∫: ${result}`);
                addClue(`–ê–Ω–∞–ª–∏–∑ —É–ª–∏–∫: ${result}`);
                updateCluesCounter();
            }
            document.getElementById('sceneDescription').textContent = result;
            document.getElementById('analysisModal').style.display = 'none';
            updateInventory();
        }

        function showAccusation() {
            document.getElementById('accusationModal').style.display = 'flex';
            gameState.accused = null;
            document.querySelectorAll('.accuse-option').forEach(o => {
                o.style.background = '';
                o.style.borderColor = '#3a4a5a';
            });
        }

        function makeAccusation() {
            if (!gameState.accused) {
                alert("–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º–æ–≥–æ!");
                return;
            }
            
            const endings = {
                perfect: {
                    title: "–ë–ª–µ—Å—Ç—è—â–∞—è —Ä–∞–±–æ—Ç–∞!",
                    text: "–í—ã —Ä–∞—Å–∫—Ä—ã–ª–∏ –¥–µ–ª–æ! –í—Å–µ —É–ª–∏–∫–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –≤–∏–Ω–æ–≤–Ω–æ—Å—Ç—å —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞. –ü—Ä–∞–≤–æ—Å—É–¥–∏–µ –≤–æ—Å—Ç–æ—Ä–∂–µ—Å—Ç–≤–æ–≤–∞–ª–æ!",
                    image: "üîç‚úÖ"
                },
                good: {
                    title: "–î–µ–ª–æ —Ä–∞—Å–∫—Ä—ã—Ç–æ!",
                    text: "–í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ —É–±–∏–π—Ü—É! –•–æ—Ç—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ—Ç–∞–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –Ω–µ—è—Å–Ω—ã–º–∏, –æ—Å–Ω–æ–≤–Ω—ã–µ —É–ª–∏–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –≤–∞—à—É —Ç–µ–æ—Ä–∏—é.",
                    image: "üéØ"
                },
                wrong: {
                    title: "–û—à–∏–±–∫–∞!",
                    text: `–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –æ–±–≤–∏–Ω–∏–ª–∏ –Ω–µ–≤–∏–Ω–æ–≤–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞. –ù–∞—Å—Ç–æ—è—â–∏–π —É–±–∏–π—Ü–∞: ${gameState.killer}. –î–µ–ª–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ—Ä–∞—Å–∫—Ä—ã—Ç—ã–º.`,
                    image: "‚ùå"
                }
            };
            
            let ending;
            if (gameState.accused === gameState.killer) {
                if (gameState.foundClues.size >= 10 && gameState.combinedClues.size >= 2) {
                    ending = endings.perfect;
                } else {
                    ending = endings.good;
                }
            } else {
                ending = endings.wrong;
            }
            
            document.getElementById('endingTitle').textContent = ending.title;
            document.getElementById('endingText').textContent = ending.text;
            document.getElementById('endingImage').textContent = ending.image;
            document.getElementById('endingModal').style.display = 'flex';
            document.getElementById('accusationModal').style.display = 'none';
        }

        function showEnding(type) {
            const endings = {
                timeout: {
                    title: "–í—Ä–µ–º—è –≤—ã—à–ª–æ!",
                    text: `–í—ã –Ω–µ —É—Å–ø–µ–ª–∏ —Ä–∞—Å–∫—Ä—ã—Ç—å –¥–µ–ª–æ. –ü–æ–ª–∏—Ü–∏—è –∑–∞–±—Ä–∞–ª–∞ –¥–µ–ª–æ, –∏ —É–±–∏–π—Ü–∞ –æ—Å—Ç–∞–ª—Å—è –±–µ–∑–Ω–∞–∫–∞–∑–∞–Ω–Ω—ã–º. –ù–∞—Å—Ç–æ—è—â–∏–π —É–±–∏–π—Ü–∞: ${gameState.killer}.`,
                    image: "‚è∞"
                }
            };
            
            const ending = endings[type];
            document.getElementById('endingTitle').textContent = ending.title;
            document.getElementById('endingText').textContent = ending.text;
            document.getElementById('endingImage').textContent = ending.image;
            document.getElementById('endingModal').style.display = 'flex';
        }

        window.addEventListener('load', initGame);
    </script>
</body>
</html>